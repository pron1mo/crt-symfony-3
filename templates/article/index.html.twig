{% extends 'base.html.twig' %}

{% block title %}{{ parent() }} - {{ article.title }}{% endblock %}

{% block body %}
    <div class="w-full bg-gray-100 p-8 mb-8 rounded-2xl">
        <div class="flex justify-between items-center text-gray-400 mb-3">
            <div>
                <a class="transition-colors duration-200  text-purple-400 hover:text-purple-600 mr-2" href="{{ path('tag', {id: article.tag.id}) }}">{{ article.tag.name }}</a>
                <span class="text-gray-600 font-bold">{{ article.author.username }}</span>
            </div>
            <span>
                {{ article.createdAt | date }}
            </span>
        </div>
        <h1 class="text-purple-700 text-3xl font-bold text-uppercase mb-2">{{ article.title }}</h1>
        <div class="text-xl text-gray-800">
            {{ article.description|raw }}
        </div>
        <hr class="border-gray-300 mt-2 mb-8">
        <div class="prose prose-purple">
            {{ article.content|raw }}
        </div>
        <hr class="border-gray-300 mt-6 mb-6">
        <div>
            <span class="text-xl text-gray-700">Комментарии:</span>
            {% for comment in article.comments %}
                <div class="flex mt-4">
                    <div class="flex-shrink-0 mr-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="mt-2 rounded-full w-10 h-10 p-2 bg-gray-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                    </div>
                    <div class="flex-1 border rounded-lg px-4 py-2 sm:px-6 sm:py-4 leading-relaxed">
                        <strong>{{ comment.author.username }}</strong> <span class="text-xs text-gray-400">{{ comment.createdAt | date }}</span>
                        <p class="text-sm">
                            {{ comment.text }}
                        </p>
                    </div>
                </div>
            {% endfor %}

            {% if app.user %}
                <div class="mt-4">
                    {{ form_start(form) }}
                    {{ form_widget(form.text, {'attr': {'class': 'w-full h-28 p-3 rounded-lg focus:ring-indigo-800 placeholder-gray-400 resize-none', 'placeholder': 'Напишите комментарий'}}) }}
                    <button type="submit" class="px-4 py-2 bg-indigo-700 text-white rounded-lg">Отправить</button>
                    {{ form_end(form) }}
                </div>
            {% else %}
                <div class="w-full mt-2 bg-white p-8">
                    <p>
                        <a class="mr-1 text-indigo-800 hover:text-indigo-600" href="{{ path('app_login') }}">Авторизуйтесь</a>
                        чтобы оставить комментарий!
                    </p>
                </div>
            {% endif %}

        </div>
    </div>
{% endblock %}
